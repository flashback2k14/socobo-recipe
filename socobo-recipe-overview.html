<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<!-- Todo: Add your Polymer Element Imports here: -->
<link rel="import" href="socobo-recipe-shortinfo.html">

<dom-module id="socobo-recipe-overview">
  <style>
    :host{
      background-color: red;
    }

    #recipe_list{
      margin-top: 20px;
    }

    #recipe_list:first-child{
      border-top: 1px solid #F4F0EC;
    }

    #no_recipes{
      font-size: 40px;
      text-align: center;
      font-family: sans-serif;
      font-weight: 100;
      color: #F4F0EC;
      line-height: 80px;
    }

    paper-fab{
      position: absolute;
      bottom: 40px;
      right: 40px;
    }

    paper-fab#add{
      display: block;
      --paper-fab-background: green;
      --paper-fab-keyboard-focus-background: green;
    }

    paper-fab#clear{
      display: none;
      --paper-fab-background: red;
      --paper-fab-keyboard-focus-background: red;
    }

  </style>

  <template fullbleed>
    <div id="recipe_list">
      <template is="dom-if" if="{{!recipes.length}}">
        <p id="no_recipes">no recipes<br>available</p>
      </template>
      <template is="dom-repeat" items="{{recipes}}">
        <socobo-recipe-shortinfo
          name="{{item.name}}"
          isChecked="{{valueOfCheckBox}}"
          on-check="handleCheck"
          on-uncheck="handleUncheck">
        </socobo-recipe-shortinfo>
      </template>
    </div>
    <paper-fab id="add" icon="add">
    </paper-fab>
    <paper-fab id="clear" icon="clear">
    </paper-fab>
  </template>

</dom-module>

<script>

  var checkedBoxes = 0;

(function() {
  Polymer({
    is: 'socobo-recipe-overview',

    properties: {
      recipes : {
        type : Array,
        value : [{name : "K채sekuchen"},
          {name : "Wurstgulash"},
          {name : "Melonenb채llchen"},{name : "K채sekuchen"},
          {name : "Wurstgulash"},
          {name : "Melonenb채llchen"}]
      }
    },
    valueOfCheckBox : {
      type : Boolean,
      value : false
    },
    handleCheck : function(){
      checkedBoxes++;
      trackCheckedBoxes();
    },
    handleUncheck : function(){
      checkedBoxes--;
      trackCheckedBoxes();
    }
  });
})();



function trackCheckedBoxes() {
  if(checkedBoxes > 0){
    switchButton("clear","add");
  }else{
    switchButton("add", "clear");
  }
}

function switchButton(enableButton, disableButton){
  var disabled = document.getElementById(disableButton).style.display = "none";
  document.getElementById(enableButton).style.display = "block";
}

</script>
